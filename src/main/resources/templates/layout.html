<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle} ?: 'Order Manager'">Order Manager</title>

    <!-- ðŸŒ Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- ðŸŒ„ Inline Styles (No External CSS) -->
    <style>
        /* ðŸŒ„ Backgrounds */
        body.authenticated {
            background: url('/images/dashboard-bg.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: "Poppins", sans-serif;
        }

        body.public {
            background: url('/images/login.jpeg') no-repeat center center fixed;
            background-size: cover;
            font-family: "Poppins", sans-serif;
        }

        /* ðŸŒŸ Main content area */
        .main-content {
            background-color: rgba(255, 255, 255, 0.88);
            border-radius: 16px;
            padding: 2rem;
            margin-top: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* ðŸ§± Layout structure */
        html, body {
            min-height: 100%;
        }

        /* Center content for login/signup */
        .centered-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            max-width: 400px;
            margin: auto;
            margin-top: 10vh;
        }
    </style>
</head>

<!-- ðŸ’¡ Dynamically add background class -->
<body th:classappend="${#authorization.expression('isAuthenticated()')} ? 'authenticated' : 'public'">

<!-- ðŸ§­ Navbar (hidden on login/signup) -->
<div th:if="${#authorization.expression('isAuthenticated()')} or !(page=='login' or page=='signup')"
     th:replace="fragments/navbar :: navbar"></div>

<!-- ðŸ§± Main Content -->
<main class="container mt-4 main-content" th:fragment="layout(content)">
    <div th:insert="${content}"></div>
</main>

<!-- âš™ï¸ Footer (hidden on login/signup) -->
<div th:if="${#authorization.expression('isAuthenticated()')} or !(page=='login' or page=='signup')"
     th:replace="fragments/footer :: footer"></div>

<!-- ðŸ§© Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
